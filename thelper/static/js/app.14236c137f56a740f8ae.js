webpackJsonp([1],{HqQu:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),i=n("mvHQ"),a=n.n(i),o={name:"Give",props:["territories","publishers"],data:function(){return{searchT:"",searchP:"",showP:!1,currentTid:"",nDate:new Date,showNumber:10}},methods:{giveHandler:function(e){this.showP=!0,this.currentTid=e.id},give:function(e){var t=this.currentTid,n=this.territories.find(function(e){return e.id==t});n.given.push({date:this.nDate.getTime(),publisherId:e.id}),n.free=!1,e.has.push({date:(new Date).getTime(),tId:this.currentTid}),this.cancel()},cancel:function(){this.nDate=new Date,this.currentTid="",this.showP=!1,this.searchP=""}},computed:{freeNumber:function(){return this.territories.filter(function(e){return e.active&e.free}).length},filteredT:function(){var e=this;return this.territories.filter(function(t){return t.active&t.free&t.desc.toLowerCase().includes(e.searchT.toLowerCase())}).sort(function(e,t){if(e.recieved.length&t.recieved.length)return e.recieved[e.recieved.length-1]-t.recieved[t.recieved.length-1]}).slice(0,this.showNumber)},filteredP:function(){var e=this;return this.publishers.filter(function(t){return t.active&t.surname.toLowerCase().includes(e.searchP.toLowerCase())}).slice(0,5)}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Przydział")]),e._v(" "),n("h3",[e._v("Lista wolnych terenów ("+e._s(e.freeNumber)+")")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchT,expression:"searchT"}],attrs:{type:"text",placeholder:"Szukaj w opisach"},domProps:{value:e.searchT},on:{input:function(t){t.target.composing||(e.searchT=t.target.value)}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showP,expression:"showP"}],staticClass:"modal"},[n("h3",[e._v("Lista głosicieli")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchP,expression:"searchP"}],attrs:{type:"text",placeholder:"Szukaj w nazwiskach"},domProps:{value:e.searchP},on:{input:function(t){t.target.composing||(e.searchP=t.target.value)}}}),e._v(" "),n("label",[e._v("Data przydziału: \n      "),n("input",{attrs:{type:"date"},domProps:{value:e.nDate&&e.nDate.toISOString().split("T")[0]},on:{input:function(t){e.nDate=t.target.valueAsDate}}})]),e._v(" "),n("button",{on:{click:function(t){e.cancel()}}},[e._v("Anuluj")]),e._v(" "),n("ul",e._l(e.filteredP,function(t){return n("li",{key:t.id},[e._v("\n        "+e._s(t.name)+"\n        "+e._s(t.surname)+"\n        "),n("div",[n("button",{on:{click:function(n){e.give(t)}}},[e._v("Wybierz")])])])}))]),e._v(" "),n("ul",e._l(e.filteredT,function(t){return n("li",{key:t.id},[n("div",{staticClass:"width2"},[n("span",[e._v(e._s(t.number))]),e._v(" "),t.tel?n("span",[e._v("\n          "+e._s(t.tel?"☎":"")+"\n        ")]):e._e()]),e._v("\n      "+e._s(t.desc)+"\n      "),t.recieved.length?n("div",[e._v("\n        Opracowany "+e._s(t.recieved.length)+" razy, \n        statnio "+e._s(Math.floor(((new Date).getTime()-t.recieved[t.recieved.length-1])/864e5))+" dni temu\n      ")]):e._e(),e._v(" "),n("button",{on:{click:function(n){e.giveHandler(t)}}},[e._v("przydziel")])])})),e._v(" "),n("button",{on:{click:function(t){e.showNumber+=10}}},[e._v("Pokaż więcej")])])},staticRenderFns:[]};var l=n("VU/8")(o,s,!1,function(e){n("bjA3")},null,null).exports,c={name:"Recieve",props:["territories","publishers"],data:function(){return{searchNumber:"",nDate:new Date,showNumber:10,searchQuery:"",tNumber:""}},methods:{recieve:function(e){e.recieved.push(this.nDate.getTime()),e.free=!0,this.updateP(e),this.nDate=new Date,this.searchNumber=""},updateP:function(e){for(var t=this.publishers,n=0;n<t.length;n++)for(var r=0;r<t[n].has.length;r++)t[n].has[r].tId==e.id&&t[n].has.splice(r,1)}},computed:{filteredT:function(){var e=this;return this.territories.filter(function(t){return t.number==+e.searchNumber&t.active&!t.free})},warningFilteredT:function(){var e=(new Date).getTime()-864e7;return this.territories.filter(function(t){if(!t.free)return t.given[t.given.length-1].date<e}).slice(0,this.showNumber)}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h2",[e._v("Zwrot")]),e._v(" "),n("label",[e._v("\n    Podaj numer: \n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchNumber,expression:"searchNumber"}],attrs:{type:"number",placeholder:"Numer terenu"},domProps:{value:e.searchNumber},on:{input:function(t){t.target.composing||(e.searchNumber=t.target.value)}}})]),e._v(" "),n("label",[e._v("Data opracowania: \n    "),n("input",{attrs:{type:"date"},domProps:{value:e.nDate&&e.nDate.toISOString().split("T")[0]},on:{input:function(t){e.nDate=t.target.valueAsDate}}})]),e._v(" "),n("ul",e._l(e.filteredT,function(t){return n("li",{key:t.id},[n("div",{staticClass:"width2"},[n("span",[e._v(e._s(t.number))]),e._v(" "),t.tel?n("span",[e._v("\n          "+e._s(t.tel?"☎":"")+"\n        ")]):e._e()]),e._v("\n      "+e._s(t.desc)+"\n      "),n("button",{on:{click:function(n){e.recieve(t)}}},[e._v("zwrot")])])})),e._v(" "),n("h3",[e._v("Lista terenów ("+e._s(e.tNumber)+")")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"Szukaj w opisach"},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),e._v(" "),e.warningFilteredT.length?n("div",[n("h3",[e._v("Lista terenów przydzielonych ponad 100 dni temu")]),e._v(" "),n("ul",e._l(e.warningFilteredT,function(t,r){return n("li",{key:r},[n("div",{staticClass:"width2"},[n("span",[e._v(e._s(t.number))]),e._v(" "),t.tel?n("span",[e._v("\n            "+e._s(t.tel?"☎":"")+"\n          ")]):e._e()]),e._v("\n        "+e._s(t.desc)+"\n        "),n("div",[e._v("\n          Przydzielony "+e._s(Math.floor(((new Date).getTime()-t.given[t.given.length-1].date)/864e5))+" dni temu\n        ")]),e._v(" "),n("button",{on:{click:function(n){e.recieve(t)}}},[e._v("zwrot")])])})),e._v(" "),e.warningFilteredT.length>10?n("button",{on:{click:function(t){e.showNumber+=10}}},[e._v("Pokaż więcej")]):e._e()]):e._e()])},staticRenderFns:[]};var d=n("VU/8")(c,u,!1,function(e){n("lvl1")},null,null).exports,v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h2",[e._v("Tereny")]),e._v(" "),n("h3",[e._v("Dodaj nowy teren")]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.addT(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newT.number,expression:"newT.number"}],attrs:{type:"number",placeholder:"Numer"},domProps:{value:e.newT.number},on:{input:function(t){t.target.composing||e.$set(e.newT,"number",t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newT.desc,expression:"newT.desc"}],attrs:{type:"text",placeholder:"Opis"},domProps:{value:e.newT.desc},on:{input:function(t){t.target.composing||e.$set(e.newT,"desc",t.target.value)}}}),e._v(" "),n("label",[e._v("Telefoniczny\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newT.tel,expression:"newT.tel"}],attrs:{type:"checkbox",name:"info",value:"tel"},domProps:{checked:Array.isArray(e.newT.tel)?e._i(e.newT.tel,"tel")>-1:e.newT.tel},on:{change:function(t){var n=e.newT.tel,r=t.target,i=!!r.checked;if(Array.isArray(n)){var a=e._i(n,"tel");r.checked?a<0&&e.$set(e.newT,"tel",n.concat(["tel"])):a>-1&&e.$set(e.newT,"tel",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(e.newT,"tel",i)}}})]),e._v(" "),n("input",{attrs:{type:"submit",value:"Dodaj"}})]),e._v(" "),n("h3",[e._v("Lista terenów ("+e._s(e.tNumber)+")")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"Szukaj w opisach"},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),e._v(" "),n("label",[e._v("Pokaż usunięte"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.showAll,expression:"showAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showAll)?e._i(e.showAll,null)>-1:e.showAll},on:{change:function(t){var n=e.showAll,r=t.target,i=!!r.checked;if(Array.isArray(n)){var a=e._i(n,null);r.checked?a<0&&(e.showAll=n.concat([null])):a>-1&&(e.showAll=n.slice(0,a).concat(n.slice(a+1)))}else e.showAll=i}}})]),e._v(" "),n("ul",e._l(e.filteredT,function(t,r){return n("li",{key:r},[n("div",{staticClass:"width2"},[n("span",[e._v(e._s(t.number))]),e._v(" "),t.tel?n("span",[e._v("\n        "+e._s(t.tel?"☎":"")+"\n      ")]):e._e()]),e._v("\n    "+e._s(t.desc)+"\n    "),n("div",[n("button",{on:{click:function(n){e.editT(t)}}},[e._v("edycja")]),e._v(" "),t.active?n("button",{on:{click:function(e){t.active=!1}}},[e._v("usuń")]):e._e(),e._v(" "),t.active?e._e():n("button",{on:{click:function(e){t.active=!0}}},[e._v("przywróć")])])])})),e._v(" "),n("button",{on:{click:function(t){e.showNumber+=10}}},[e._v("Pokaż więcej")])])},staticRenderFns:[]};var h=n("VU/8")({name:"Terr",props:["territories","addT","newT","editT","editedT"],data:function(){return{searchQuery:"",showAll:!1,showNumber:10}},computed:{tNumber:function(){return this.territories.length},filteredT:function(){var e=this;return this.territories.filter(function(t){return(e.showAll?!t.active:t.active)&t.desc.toLowerCase().includes(e.searchQuery.toLowerCase())}).slice(0,this.showNumber)}}},v,!1,function(e){n("VPcp")},null,null).exports,p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h2",[e._v("Głosiciele")]),e._v(" "),n("h3",[e._v("Dodaj nowego głosiciela")]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.addP(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newP.name,expression:"newP.name"}],attrs:{type:"text",placeholder:"Imię"},domProps:{value:e.newP.name},on:{input:function(t){t.target.composing||e.$set(e.newP,"name",t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newP.surname,expression:"newP.surname"}],attrs:{type:"text",placeholder:"Nazwisko"},domProps:{value:e.newP.surname},on:{input:function(t){t.target.composing||e.$set(e.newP,"surname",t.target.value)}}}),e._v(" "),n("input",{attrs:{type:"submit",value:"Dodaj"}})]),e._v(" "),n("h3",[e._v("Lista głosicieli ("+e._s(e.pNumber)+")")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"Szukaj w nazwiskach"},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),e._v(" "),n("label",[e._v("Pokaż usuniętych"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.showAll,expression:"showAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showAll)?e._i(e.showAll,null)>-1:e.showAll},on:{change:function(t){var n=e.showAll,r=t.target,i=!!r.checked;if(Array.isArray(n)){var a=e._i(n,null);r.checked?a<0&&(e.showAll=n.concat([null])):a>-1&&(e.showAll=n.slice(0,a).concat(n.slice(a+1)))}else e.showAll=i}}})]),e._v(" "),n("ul",e._l(e.filteredP,function(t){return n("li",{key:t.id},[e._v("\n      "+e._s(t.name)+"\n      "+e._s(t.surname)+"\n      "),n("div",[n("button",{on:{click:function(n){e.editP(t)}}},[e._v("edycja")]),e._v(" "),t.active?n("button",{on:{click:function(e){t.active=!1}}},[e._v("usuń")]):e._e(),e._v(" "),t.active?e._e():n("button",{on:{click:function(e){t.active=!0}}},[e._v("przywróć")])])])})),e._v(" "),n("button",{on:{click:function(t){e.showNumber+=10}}},[e._v("Pokaż więcej")])])},staticRenderFns:[]};var m=n("VU/8")({name:"Publ",data:function(){return{searchQuery:"",showAll:!1,showNumber:10}},props:["publishers","newP","addP","editP","editedP"],computed:{pNumber:function(){return this.publishers.length},filteredP:function(){var e=this;return this.publishers.filter(function(t){return(e.showAll?!t.active:t.active)&t.surname.toLowerCase().includes(e.searchQuery.toLowerCase())}).slice(0,this.showNumber)}}},p,!1,function(e){n("bHND")},null,null).exports,_=n("fZjL"),f=n.n(_),w={name:"Backup",data:function(){return{}},methods:{localStorageBackup:function(){for(var e={},t=0;t<localStorage.length;t++){var n=localStorage.key(t),r=localStorage.getItem(n);e[n]=escape(encodeURIComponent(r))}var i=a()(e),o="data:text/javascript;charset=utf-8;base64,"+btoa(i),s=document.createElement("a");s.setAttribute("download","backup.json"),s.setAttribute("href",o),document.querySelector("body").appendChild(s),s.click(),s.remove()},localStorageRestore:function(){var e=document.createElement("div");(t=document.createElement("a")).appendChild(document.createTextNode("X")),t.setAttribute("href","#"),t.style.position="absolute",t.style.top="10px",t.style.right="10px",t.style["text-decoration"]="none",t.style.color="#fff",e.appendChild(t),t.onclick=function(){e.remove()},e.style.width="50%",e.style.position="absolute",e.style.top="25%",e.style.left="25%",e.style["background-color"]="gray",e.style["text-align"]="center",e.style.padding="50px",e.style.color="#fff",e.style["z-index"]=1e4;var t,n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("id","fileinput"),n.onchange=function(t){e.remove();var n=t.target.files[0];if(n){var r=new FileReader;r.onload=function(e){var t=e.target.result,n=JSON.parse(t);for(var r in n){var i=decodeURIComponent(unescape(n[r]));window.localStorage.setItem(r,i)}alert("Imported "+f()(n).length+" items from backup.")},r.readAsText(n)}else alert("Failed to load file")},(t=document.createElement("h3")).appendChild(document.createTextNode("Wybierz plik zawierający kopię zapasową")),e.appendChild(t),e.appendChild(n),document.querySelector("body").appendChild(e)},localStorageClear:function(){window.confirm("Czy naprawdę chcesz usunąć wszystkie "+localStorage.length+" zbiory danych (localStorage) tej strony?")&&localStorage.clear()}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Kopia zapasowa")]),e._v(" "),n("p",[e._v("Dane się przechowywane w pamięci przeglądarki (localStorage).")]),e._v(" "),n("button",{on:{click:e.localStorageBackup}},[e._v("Stwórz kopię zapasową")]),e._v(" "),n("button",{on:{click:e.localStorageRestore}},[e._v("Przywróć kopię zapasową")]),e._v(" "),n("h3",[e._v("Uważaj na ten przycisk!")]),e._v(" "),n("button",{staticClass:"red",on:{click:e.localStorageClear}},[e._v("Wyczyść wszystkie dane")])])},staticRenderFns:[]};var b=n("VU/8")(w,g,!1,function(e){n("HqQu")},null,null).exports,y={name:"Info",props:["territories","publishers"],methods:{fillDB:function(){for(var e=this.territories,t=this.publishers,n=function(e){setTimeout(function(){var n=e%2==0?"C":"B",r={id:(new Date).getTime(),name:"Imię "+e,surname:"Nazwisko"+n,active:!0,has:[]};t.push(r)},1)},r=1;r<201;r++)n(r);var i=function(t){setTimeout(function(){var n=t%2==0?"A":"B",r={id:(new Date).getTime(),number:t,desc:n+" opis "+t,tel:!1,active:!0,free:!0,given:[],recieved:[]};e.push(r)},1)};for(r=1;r<301;r++)i(r)}}},T={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Info")]),e._v(" "),n("p",[e._v("\n    Fill DB with stupid data, use only once.\n    \n    "),n("button",{on:{"~click":function(t){return e.fillDB(t)}}},[e._v("fill db")])]),e._v(" "),n("hr"),e._v(" "),n("h3",[e._v("TODO")]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("t sort free "),n("strong",[e._v(" fix sorting ")])]),e._v(" "),n("li",[e._v("t sort given 100 days ago")]),e._v(" "),n("li",[e._v("edit p&t")]),e._v(" "),n("li",[e._v("design...")])])}]},P=n("VU/8")(y,T,!1,null,null,null).exports,k={data:function(){return{currentComponent:P,territories:[],publishers:[],newP:{},newT:{},editedP:{},editedT:{},recievedNumber:""}},name:"App",components:{Give:l,Recieve:d,Terr:h,Publ:m,Backup:b},methods:{addP:function(){this.publishers.push({id:(new Date).getTime(),name:this.newP.name,surname:this.newP.surname,active:!0,has:[]}),this.newP={}},editP:function(e){this.editedP=JSON.parse(a()(e)),console.log(this.editedP)},addT:function(){this.territories.push({id:(new Date).getTime(),number:+this.newT.number,desc:this.newT.desc,tel:!1|this.newT.tel,active:!0,free:!0,given:[],recieved:[]}),this.newT={}},editT:function(e){this.editedT=JSON.parse(a()(e)),console.log(this.editedT)}},mounted:function(){console.log("App mounted!"),localStorage.getItem("territories")&&(this.territories=JSON.parse(localStorage.getItem("territories"))),localStorage.getItem("publishers")&&(this.publishers=JSON.parse(localStorage.getItem("publishers")))},watch:{territories:{handler:function(){console.log("Territories changed!"),localStorage.setItem("territories",a()(this.territories))},deep:!0},publishers:{handler:function(){console.log("Publishers changed!"),localStorage.setItem("publishers",a()(this.publishers))},deep:!0}}},N={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",{staticClass:"logo"},[e._v("THelper")]),e._v(" "),n("nav",{staticClass:"main-nav"},[n("button",{on:{click:function(t){e.currentComponent="Give"}}},[e._v("Przydział")]),e._v(" "),n("button",{on:{click:function(t){e.currentComponent="Recieve"}}},[e._v("Zwrot")]),e._v(" "),n("button",{on:{click:function(t){e.currentComponent="Terr"}}},[e._v("Tereny")]),e._v(" "),n("button",{on:{click:function(t){e.currentComponent="Publ"}}},[e._v("Głosiciele")]),e._v(" "),n("button",{on:{click:function(t){e.currentComponent="Backup"}}},[e._v("Kopia zap.")])]),e._v(" "),n(e.currentComponent,{tag:"component",attrs:{territories:e.territories,publishers:e.publishers,addT:e.addT,newT:e.newT,editT:e.editT,editedT:e.editedT,addP:e.addP,newP:e.newP,editP:e.editP,editedP:e.editedP}})],1)},staticRenderFns:[]};var A=n("VU/8")(k,N,!1,function(e){n("QHR7")},null,null).exports,z=n("1mcD"),x=n.n(z);r.a.use(x.a),r.a.config.productionTip=!1,new r.a({el:"#app",components:{App:A},template:"<App/>"})},QHR7:function(e,t){},VPcp:function(e,t){},bHND:function(e,t){},bjA3:function(e,t){},lvl1:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.14236c137f56a740f8ae.js.map